---
import Layout from '../layouts/Layout.astro';
import Hero from '../components/Home/Hero/Hero.astro';
import Banner from '../components/Home/Banner/Banner.astro';
import ContentHero from '../components/Home/ContentHero/ContentHero.astro';


const response = await fetch(`${import.meta.env.WPGRAPHQL_URL}`, {
	method: "POST",
	headers: {
		"content-type": "application/json",
	},
	body: JSON.stringify({
    	query: `
			query homePageQuery {
				page(id: "/", idType: URI) {
					homePageComponents {
						heroComponent {
							heroButtonText
							heroImage {
								altText
								sourceUrl
							}
							heroLogo {
								altText
								sourceUrl
							}
						}
						bannerComponent {
							bannerCloseCropImage {
								altText
								sourceUrl
							}
							bannerHighlight
							bannerSubTitle
							bannerTitle
						}
						contentHeroComponent {
							contentHeroImage {
								altText
								sourceUrl
							}
							contentHeroSideImage {
								altText
								sourceUrl
							}
							contentHeroTitle
							contentHeroContent
						}
					}
				}
			}
		`,
  	}),
});

const { data: { page: { homePageComponents } } } = await response.json();
---

<Layout title="Welcome to Astro.">
	<Hero data={homePageComponents.heroComponent} />
	<Banner data={homePageComponents.bannerComponent} />
	<ContentHero data={homePageComponents.contentHeroComponent} />
</Layout>

